<?xml version="1.0"?>

<odoo>
    <record id="certification_paperformat" model="report.paperformat">
        <field name="name">A4</field>
        <field name="default" eval="True"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>

        <field name="margin_top">0</field>
        <!--        2-->

        <field name="margin_bottom">0</field>
        <field name="margin_left">0</field>
        <field name="margin_right">0</field>
        <field name="header_line" eval="False"/>

        <field name="header_spacing">0</field>
        <!--        0-->

        <field name="dpi">90</field>
    </record>


    <template id="certification_layout">
        <div class="article">
            <t t-out="0"/>
        </div>
    </template>


    <template id="iot_certification_certification_report_template">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-set="count" t-value="0"/>
                <t t-call="iot_certification.certification_layout">
                    <t t-call="iot_certification.iot_certification_certification_report_style"/>
                    <t t-set="top_px_bg_img_offset" t-value="0"/>
                    <t t-set="style_str_format"
                       t-value="'position: absolute;font-size:3em;width:100%;height:100%;z-index:-1;left: 0; top: {}px;'"/>
                    <div
                            t-att-style="style_str_format.format(top_px_bg_img_offset)">
                        <img src="/iot_certification/static/certification_report/certificate_bg.png"/>
                    </div>
                    <t t-set="top_px_bg_img_offset" t-value="top_px_bg_img_offset + 1060"/>
                    <div class="report-container">
                        <t t-call="iot_certification.iot_certification_certification_report_page_1_html_document"/>
                    </div>
                    <div style="page-break-before: always;"/>
                    <div
                            t-att-style="style_str_format.format(top_px_bg_img_offset)">
                        <img src="/iot_certification/static/certification_report/certificate_bg.png"/>
                    </div>
                    <t t-set="top_px_bg_img_offset" t-value="top_px_bg_img_offset + 1060"/>
                    <div class="report-container">
                        <t t-call="iot_certification.iot_certification_certification_report_appendix_1_html"/>
                    </div>
                    <div style="page-break-before: always;"/>
                    <div
                            t-att-style="style_str_format.format(top_px_bg_img_offset)">
                        <img src="/iot_certification/static/certification_report/certificate_bg.png"/>
                    </div>
                    <t t-set="top_px_bg_img_offset" t-value="top_px_bg_img_offset + 1060"/>
                    <div class="report-container">
                        <t t-call="iot_certification.iot_certification_certification_report_appendix_2_html"/>
                    </div>
                    <div style="page-break-before: always;"/>
                    <div
                            t-att-style="style_str_format.format(top_px_bg_img_offset)">
                        <img src="/iot_certification/static/certification_report/certificate_bg.png"/>
                    </div>
                    <t t-set="top_px_bg_img_offset" t-value="top_px_bg_img_offset + 1060"/>
                    <div class="report-container" style="padding-top: 0px;">
                        <t t-call="iot_certification.iot_certification_certification_technical_specification_html"/>
                    </div>
                    <div style="page-break-before: always;"/>
                </t>
            </t>
        </t>
    </template>

    <record id="iot_certification_certification_report_action" model="ir.actions.report">
        <field name="name">Роздрукувати сертифікат</field>
        <field name="model">iot_certification_order</field>
        <field name="report_type">qweb-pdf</field>
        <field name="report_name">iot_certification.iot_certification_certification_report_template</field>
        <field name="report_file">event.iot_certification_certification_report</field>
        <field name="print_report_name">f"Certification report No.{object.name}"</field>
        <field name="paperformat_id" ref="iot_certification.certification_paperformat"/>
        <field name="binding_model_id" eval="True"/>
        <field name="binding_type">report</field>
    </record>
</odoo>